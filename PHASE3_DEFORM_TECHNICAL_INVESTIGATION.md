# Phase 3: Deformã‚·ã‚¹ãƒ†ãƒ çµ±åˆ æŠ€è¡“èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ

## 1. ãƒã‚¤ãƒˆãƒãƒƒãƒ—æ©Ÿèƒ½å®Ÿè£… (2025-08-11)

### 1.1 å®Ÿè£…å†…å®¹
- `TerrainGenerator` ã‚¯ãƒ©ã‚¹ã«ãƒã‚¤ãƒˆãƒãƒƒãƒ—æ©Ÿèƒ½ã‚’çµ±åˆ
- 3ã¤ã®ç”Ÿæˆãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ:
  - `Noise`: ãƒã‚¤ã‚ºãƒ™ãƒ¼ã‚¹ã®ç”Ÿæˆ
  - `HeightMap`: ãƒã‚¤ãƒˆãƒãƒƒãƒ—ãƒ™ãƒ¼ã‚¹ã®ç”Ÿæˆ
  - `NoiseAndHeightMap`: ãƒã‚¤ã‚ºã¨ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã®çµ„ã¿åˆã‚ã›

### 1.2 æŠ€è¡“çš„è©³ç´°

#### ãƒã‚¤ãƒˆãƒãƒƒãƒ—å‡¦ç†ãƒ•ãƒ­ãƒ¼
```mermaid
graph TD
    A[ãƒã‚¤ãƒˆãƒãƒƒãƒ—èª­ã¿è¾¼ã¿] --> B[è§£åƒåº¦ã®æ­£è¦åŒ–]
    B --> C[é«˜ã•ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡º]
    C --> D[ã‚¹ã‚±ãƒ¼ãƒ«/ã‚ªãƒ•ã‚»ãƒƒãƒˆé©ç”¨]
    D --> E[TerrainDataã«è¨­å®š]
```

#### ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- **Height Map**: é«˜ã•æƒ…å ±ã‚’æŒã¤ãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«æ¨å¥¨ï¼‰
- **Height Scale**: é«˜ã•ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°
- **Height Offset**: ãƒ™ãƒ¼ã‚¹ã®é«˜ã•ã‚ªãƒ•ã‚»ãƒƒãƒˆ
- **Flip Vertically**: ä¸Šä¸‹åè»¢ãƒ•ãƒ©ã‚°

### 1.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã®è§£åƒåº¦ã«æ¯”ä¾‹
- å‡¦ç†æ™‚é–“: ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®èª­ã¿è¾¼ã¿ã¨é«˜ã•ãƒãƒƒãƒ—ã®ç”Ÿæˆã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œ
- æœ€é©åŒ–ã®ä½™åœ°:
  - éåŒæœŸèª­ã¿è¾¼ã¿ã®å®Ÿè£…
  - è§£åƒåº¦ã®è‡ªå‹•èª¿æ•´
  - ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ç”Ÿæˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Vastcore - Advanced Procedural Structure Generation System  
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 (ç·Šæ€¥ãƒ»é‡è¦ / æœ€å„ªå…ˆ)  
**ä½œæˆæ—¥**: 2025å¹´1æœˆ  
**èª¿æŸ»ç¯„å›²**: Unity Deformãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æŠ€è¡“ä»•æ§˜ãƒ»çµ±åˆæ–¹å¼è¨­è¨ˆ

---

## ğŸ” **æŠ€è¡“èª¿æŸ»çµæœ**

### **1. Deformãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å€™è£œæ¯”è¼ƒ**

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å | é–‹ç™ºè€… | ä¾¡æ ¼ | å¤‰å½¢æ•° | å¯¾å¿œUnity | Burst/Jobs | è©•ä¾¡ |
|-------------|-------|------|--------|-----------|------------|------|
| **Deform** | keenanwoodall (GitHub) | FREE (MIT) | 40+ | 2022.3+ | âœ… | ğŸ¥‡ **æ¨å¥¨** |
| **Deform** | BBeans (Asset Store) | FREE | - | 2022.3+ | âœ… | ğŸ¥ˆ å€™è£œ |
| **MegaFiers** | Chris West | $75 | 50+ | 3.5.0+ | âŒ | â­ é«˜æ©Ÿèƒ½ |
| **Mesh Deformation Collection** | Matej Vanco | $84.99 | å¤šæ•° | 2021.3+ | âœ… | â­ åŒ…æ‹¬çš„ |

### **2. æ¨å¥¨è§£æ±ºç­–: keenanwoodall/Deform**

#### **æŠ€è¡“çš„å„ªä½æ€§**
```
âœ… å®Œå…¨ç„¡æ–™ï¼ˆMIT Licenseï¼‰
âœ… 40ç¨®é¡ä»¥ä¸Šã®Deformer
âœ… Job System + Burst Compilerå¯¾å¿œ
âœ… Unity 2022.3+ å®Œå…¨å¯¾å¿œ
âœ… ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ‡ã‚£ã‚¿ãƒ»ãƒãƒ³ãƒ‰ãƒ«æä¾›
âœ… ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ï¼ˆæ‹¡å¼µå¯èƒ½ï¼‰
âœ… ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé–‹ç™ºãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
```

#### **ä¸»è¦æ©Ÿèƒ½ä¸€è¦§**
```csharp
// åŸºæœ¬å¤‰å½¢ç³»
BendDeformer       // ãƒ™ãƒ³ãƒ‰å¤‰å½¢
TwistDeformer      // ãƒ„ã‚¤ã‚¹ãƒˆå¤‰å½¢
TaperDeformer      // ãƒ†ãƒ¼ãƒ‘ãƒ¼å¤‰å½¢
BulgeDeformer      // è†¨å¼µå¤‰å½¢
NoiseDeformer      // ãƒã‚¤ã‚ºå¤‰å½¢

// æ³¢å½¢ãƒ»æŒ¯å‹•ç³»
SineDeformer       // ã‚µã‚¤ãƒ³æ³¢å¤‰å½¢
RippleDeformer     // ãƒªãƒƒãƒ—ãƒ«å¤‰å½¢
WaveDeformer       // ã‚¦ã‚§ãƒ¼ãƒ–å¤‰å½¢

// é«˜åº¦å¤‰å½¢ç³»
SpherifyDeformer   // çƒé¢åŒ–
MeltDeformer       // æº¶è§£åŠ¹æœ
FlareDeformer      // ãƒ•ãƒ¬ã‚¢å¤‰å½¢
SquashDeformer     // ã‚¹ã‚«ãƒƒã‚·ãƒ¥å¤‰å½¢

// è¤‡åˆãƒ»åˆ¶å¾¡ç³»
CurveDeformer      // ã‚«ãƒ¼ãƒ–å¤‰å½¢
LatticeDeformer    // ãƒ©ãƒ†ã‚£ã‚¹å¤‰å½¢
MagnetDeformer     // ãƒã‚°ãƒãƒƒãƒˆåŠ¹æœ
TurbulenceDeformer // ä¹±æµåŠ¹æœ
```

---

## ğŸ—ï¸ **çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ**

### **3. Structure Generatorçµ±åˆæ–¹å¼**

#### **æ–°è¦ã‚¿ãƒ–: DeformerTab**
```csharp
namespace Vastcore.Editor.StructureGenerator.Tabs.Editing
{
    public class DeformerTab : IStructureGeneratorTab
    {
        // æ—¢å­˜Tabã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨UIã‚·ã‚¹ãƒ†ãƒ ã«çµ±åˆ
        public string TabName => "Deformer";
        public bool IsEnabled => true;
        
        // Deformãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ©ãƒƒãƒ‘ãƒ¼å®Ÿè£…
        private DeformIntegrationManager m_DeformManager;
        private List<DeformerSettings> m_ActiveDeformers;
    }
}
```

#### **çµ±åˆç®¡ç†ã‚¯ãƒ©ã‚¹**
```csharp
public class DeformIntegrationManager
{
    // Deformãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã®æ©‹æ¸¡ã—
    public void AddDeformer(DeformerType type, GameObject target);
    public void RemoveDeformer(int index, GameObject target);
    public void UpdateDeformerParameters(int index, DeformerParameters parameters);
    
    // Structure Generatoré€£æº
    public void ApplyToStructureChain(List<GameObject> structures);
    public void SaveDeformerPreset(string name, List<DeformerSettings> settings);
}
```

### **4. UI/UXè¨­è¨ˆ**

#### **Inspectorçµ±åˆ**
```
â”Œâ”€ Structure Generator â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Basic] [Advanced] [Operations] [...]  â”‚
â”‚ [Relationships] [Distribution]         â”‚
â”‚ [Composition] [Random] [ğŸ“Deformer]    â”‚ â† æ–°è¦ã‚¿ãƒ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ Deformer Control                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… Bend        Strength: â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚ â”‚
â”‚ â”‚ âœ… Twist       Angle: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚
â”‚ â”‚ âŒ Noise       Scale: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚
â”‚ â”‚ âŒ Ripple      Frequency: â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚
â”‚ â”‚ [+ Add Deformer â–¼]                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [Apply to All] [Save Preset] [Load]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶å¾¡**
```csharp
[System.Serializable]
public struct DeformerSettings
{
    [Header("åŸºæœ¬è¨­å®š")]
    public DeformerType type;
    public bool enabled;
    public float strength;
    
    [Header("å¤‰å½¢åˆ¶å¾¡")]
    public Vector3 axis;
    public Vector3 center;
    public AnimationCurve falloffCurve;
    
    [Header("ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³")]
    public bool animate;
    public float animationSpeed;
    public AnimationCurve animationCurve;
    
    [Header("ãƒã‚¹ã‚¯åˆ¶å¾¡")]
    public bool useMask;
    public Texture2D maskTexture;
    public bool invertMask;
}
```

---

## ğŸ“‹ **å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—**

### **Phase 3A: åŸºç›¤çµ±åˆ (3-4ãƒ¬ã‚¹ãƒãƒ³ã‚¹)**

#### **Week 1: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥ãƒ»æ¤œè¨¼**
```
ã€Unityä½œæ¥­å¿…é ˆã€‘
1. keenanwoodall/Deform GitHubã‹ã‚‰ã®å°å…¥
2. åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆãƒ»äº’æ›æ€§ç¢ºèª
3. ProBuilderãƒ¡ãƒƒã‚·ãƒ¥ã¨ã®é€£æºãƒ†ã‚¹ãƒˆ

ã€Cursor Webä½œæ¥­ã€‘
4. DeformIntegrationManageråŸºæœ¬ã‚¯ãƒ©ã‚¹è¨­è¨ˆ
5. æ—¢å­˜Structure Generatorã¨ã®çµ±åˆæ–¹å¼è©³ç´°è¨­è¨ˆ
```

#### **Week 2: ã‚¿ãƒ–UIå®Ÿè£…**
```
ã€Cursor Webä½œæ¥­ã€‘
1. DeformerTab UIå®Ÿè£…
2. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
3. ãƒ—ãƒªã‚»ãƒƒãƒˆä¿å­˜ãƒ»èª­ã¿è¾¼ã¿æ©Ÿèƒ½
4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…

ã€Unityä½œæ¥­å¿…é ˆã€‘
5. UIå‹•ä½œç¢ºèªãƒ»èª¿æ•´
6. ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆãƒ†ã‚¹ãƒˆ
```

### **Phase 3B: é«˜åº¦æ©Ÿèƒ½ (2-3ãƒ¬ã‚¹ãƒãƒ³ã‚¹)**

#### **Week 3: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒã‚¹ã‚¯**
```
ã€Cursor Webä½œæ¥­ã€‘
1. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
2. ãƒã‚¹ã‚¯ãƒ†ã‚¯ã‚¹ãƒãƒ£å¯¾å¿œ
3. è¤‡æ•°Deformerç®¡ç†ãƒ»ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

ã€Unityä½œæ¥­å¿…é ˆã€‘
5. è¤‡é›‘ãªDeformerçµ„ã¿åˆã‚ã›ãƒ†ã‚¹ãƒˆ
6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ»èª¿æ•´
```

### **Phase 3C: çµ±åˆå®Œæˆ (1-2ãƒ¬ã‚¹ãƒãƒ³ã‚¹)**

#### **Week 4: å“è³ªä¿è¨¼ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
```
ã€Cursor Webä½œæ¥­ã€‘
1. å…¨æ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
2. APIä»•æ§˜æ›¸å®Œæˆ
3. ä½¿ç”¨æ–¹æ³•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

ã€Unityä½œæ¥­å¿…é ˆã€‘
4. æœ€çµ‚å‹•ä½œç¢ºèªãƒ»ãƒã‚°ä¿®æ­£
5. å®Ÿéš›ã®æ§‹é€ ç‰©ç”Ÿæˆã§ã®å‹•ä½œãƒ†ã‚¹ãƒˆ
```

---

## âš¡ **æŠ€è¡“çš„èª²é¡Œã¨å¯¾ç­–**

### **Challenge 1: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
```
èª²é¡Œ: CPUå¤‰å½¢ã«ã‚ˆã‚‹å‡¦ç†è² è·
å¯¾ç­–: 
- Job Systemæ´»ç”¨ã®æœ€å¤§åŒ–
- LODé€£æºï¼ˆè·é›¢ã«ã‚ˆã‚‹Deformerç„¡åŠ¹åŒ–ï¼‰
- ãƒ•ãƒ¬ãƒ¼ãƒ åˆ†æ•£å‡¦ç†
```

### **Challenge 2: ãƒ¡ãƒƒã‚·ãƒ¥äº’æ›æ€§**
```
èª²é¡Œ: ProBuilderãƒ¡ãƒƒã‚·ãƒ¥ã¨ã®é€£æº
å¯¾ç­–:
- MeshFilterçµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹
- Read/Writeæ¨©é™ã®è‡ªå‹•è¨­å®š
- ãƒ¡ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒæ©Ÿèƒ½
```

### **Challenge 3: ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ**
```
èª²é¡Œ: Structure Generator UIã¨ã®çµ±åˆ
å¯¾ç­–:
- æ—¢å­˜IStructureGeneratorTabã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ´»ç”¨
- çµ±ä¸€ã•ã‚ŒãŸUI/UXãƒ‡ã‚¶ã‚¤ãƒ³
- ãƒ—ãƒªã‚»ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ å…±é€šåŒ–
```

---

## ğŸ“Š **æˆåŠŸæŒ‡æ¨™**

### **æŠ€è¡“æŒ‡æ¨™**
- [ ] 40ç¨®é¡ä»¥ä¸Šã®Deformerå¯¾å¿œå®Œäº†
- [ ] Structure Generatorå®Œå…¨çµ±åˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶é”æˆï¼ˆ1000ãƒãƒª/1msä»¥ä¸‹ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ç‡1%æœªæº€

### **æ©Ÿèƒ½æŒ‡æ¨™**
- [ ] ãƒ—ãƒªã‚»ãƒƒãƒˆä¿å­˜ãƒ»èª­ã¿è¾¼ã¿æ©Ÿèƒ½
- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒã‚¹ã‚¯ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ã‚ªãƒ•åˆ¶å¾¡
- [ ] è¤‡æ•°Deformerã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°

### **çµ±åˆæŒ‡æ¨™**
- [ ] æ—¢å­˜7ã‚¿ãƒ–ã¨ã®å®Œå…¨çµ±åˆ
- [ ] UI/UXä¸€è²«æ€§ç¢ºä¿
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™

---

## ğŸ¯ **æ¬¡å›ä½œæ¥­äºˆå®š**

### **immediate Next Action**
1. **keenanwoodall/Deform ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥** (Unityä½œæ¥­)
2. **DeformIntegrationManageråŸºæœ¬è¨­è¨ˆ** (Cursor Web)
3. **çµ±åˆæ–¹å¼è©³ç´°ä»•æ§˜ç­–å®š** (Cursor Web)

### **æº–å‚™å®Œäº†äº‹é …**
- âœ… æŠ€è¡“èª¿æŸ»å®Œäº†
- âœ… ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆå®Œäº†  
- âœ… å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ç­–å®šå®Œäº†
- âœ… èª²é¡Œãƒ»å¯¾ç­–æ˜ç¢ºåŒ–å®Œäº†

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Phase 3Aå®Œäº†å¾Œ  
**æ‰¿èªè€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¬ä»»è€… 