# Vastcore ゲームデザインドキュメント & 開発計画

## 1. ゲーム概要

### 1.1. コンセプト
Vastcoreは、広大な**球体状の3D空間**を舞台に、プレイヤーが独自の移動システムを駆使して空間そのものを遊び場とする探索ゲームです。目的はアイテム収集や敵との戦闘ではなく、**空間の踏破、移動技術の習熟、そしてルート開拓という創造性の発揮**にあります。失敗を恐れずに大胆な探索と思考を促す体験を提供します。

### 1.2. ターゲットプラットフォーム
- Mobile / PC （Mobileへの最適化を考慮）

### 1.3. 既存ジャンルとの差別化
- **探索ゲームとして**: 主な報酬はアイテムではなく、新たな発見、美しい景観、そして移動の達成感です。
- **クライミングゲームとして**: 特定のオブジェクトを登ることが主目的ではなく、空間全体をどう移動するかのルート設計が重要です。
- **コミュニケーションゲームとして**: 体験はシングルプレイに焦点を当て、プレイヤーは自身のペースで空間と向き合います。

## 2. コアシステム設計

### 2.1. 空間・構造物生成システム

- **空間設計**:
    - ゲームの舞台は、中心から外へ広がる**巨大な球体状の空間**です。
    - 空間の中央を分断するように、広大な**一面のTerrain**が存在します。これは球体を半球に分けるような形で配置されます。
    - 球体の端に到達すると、別のマップ（あるいは別の球体空間）へ遷移する仕組みを想定します。
- **構造物生成の思想**:
    - 本作の核となるのは、デザイナーの意図を反映しつつ、効率的にユニークな巨大構造物を創出するワークフローです。
    - この思想を実現するため、**エディタ拡張ツール（Structure Generator）** を開発し、これを中核に据えます。
- **Structure Generatorの機能**:
    - **基本形状の生成**: 壁、床、円柱、アーチといった基本的な建築要素を、パラメータ入力で簡単に生成します。
    - **ブール演算**: オブジェクト同士を「結合」「減算（くり抜き）」「交差」させることで、窓や複雑な開口部を持つ形状を作り出します。
    - **破壊と破片**: 生成したオブジェクトをスクリプトで破壊し、その破片を配置することで、自然な無秩序さを表現します。
    - **プレハブ化とモジュラー設計**: 作成したパーツを再利用可能なプレハブとして保存し、それらを組み合わせることで、より大規模な建築物を効率的に構築します。
    - オブジェクト同士の大きな重なりは許容し、ユニークな景観を創出します。ただし、描画の破綻は避ける必要があります。

### 2.2. プレイヤー移動システム

- **基本挙動**:
    - 物理挙動（Rigidbody）をベースとし、**強い惰性**が働く操作感を目指します。一度加速すれば、入力をやめても滑るように移動し続けます。
- **特殊ダッシュ（夢の飛行）**:
    - **操作**: WASD/スティックとは別の専用操作（例: トリガーの交互入力、マウスの上下操作、特定キーの連打）を割り当てます。
    - **加速**: 操作量に対し、線形的ではなく**指数関数的な急加速**カーブを設計し、爆発的な推進力を得られるようにします。
    - **リソース管理**: ダッシュはエネルギーを消費。時間経過や特定ポイントで回復します。
- **しゃがみハイジャンプ**:
    - **操作**: しゃがみ状態からジャンプすることで、通常より高く、遠くへ跳躍します。
    - **深度メカニクス**: しゃがみの深さ（入力の長さや速さ）でジャンプ性能が変化します。スティックの傾きやマウスの移動速度と連動させ、直感的でスキルベースの操作を実現します。
- **環境インタラクション**:
    - 巨大オブジェクトの壁面を蹴って方向転換したり、環境に発生する上昇気流を利用したりと、環境との相互作用で移動の可能性を広げます。

### 2.3. Trail（軌跡）システム

- **概要**: 空間内に存在する"道"であり、プレイヤーの移動を補助・ガイドし、新たな移動体験を生み出します。
- **種類**:
    - **環境Trail**: 風や気流のように、空間に自然発生し、時間と共に変化します。
    - **固定Trail**: 巨大オブジェクト間を結ぶ高速道路のように、大規模で固定されたルートです。
    - **プレイヤーTrail**: プレイヤーが能動的に設置するTrailです。
- **弾道記録・遊覧飛行**:
    - **弾道作成**: 弓を射るように、始点・方向・速度を決定し、未来の軌跡（弾道）をLine Rendererなどで可視化します。
    - **記録と飛行**: 決定した弾道を「プレイヤーTrail」として空間に記録し、そのTrailに沿って自動で遊覧飛行できます。長距離移動や困難なルートの開拓に利用します。
- **機能**: いずれのTrailも、沿って飛行することで**さらなる加速や方向転換のブースト**が得られる設計とします。

## 3. 表現とインタラクション

### 3.1. ビジュアル表現

- **テクスチャリング**:
    - **デカールシステム**: 巨大なオブジェクト表面に対し、小さなテクスチャ（デカール）をスクリプトで複数貼り付けることで、UV展開の手間を省きつつ、繰り返し感のない多彩な表面をプロシージャルに表現します。これにより、テクスチャの引き伸ばし問題を回避します。
- **加速表現**:
    - プレイヤーの移動速度に応じて、以下の要素を組み合わせ、圧倒的な疾走感を演出します。
        - **視野角（FOV）の変化**
        - **画面の振動（カメラシェイク）**
        - **風切り音やラインエフェクトなどのVFX**
        - **コントローラーの振動（バイブレーション）**

### 3.2. インタラクションとテキスト

- **簡易インタラクション**: 展望台や特定のオブジェクトに触れると、情報が表示されるような簡易的なインタラクションシステムを実装します。
- **テキスト管理**: ゲーム内のテキスト（ストーリーの断片、オブジェクト情報など）は、**CSVファイル**で管理します。これにより、表計算ソフトで容易にテキストの追加・編集・管理が可能です。

## 4. 開発計画（マイルストーン）

### フェーズ 1: プロジェクト基盤とプレイヤーの核実装 (完了)
- **タスク1.1: プロジェクトの初期化**: 完了。
- **タスク1.2: 物理ベースのプレイヤーコントローラー**: 安定した移動、ジャンプ、カメラ操作が可能なコントローラーを実装完了。
- **タスク1.3: テスト環境の構築**: ProBuilderによるテスト用ジオメトリを配置し、動作確認完了。

### フェーズ 2: エディタ拡張による世界構築ツールの開発 (進行中)
- **タスク2.1: Structure Generatorの基盤開発**: ProBuilder APIを呼び出し、指定パラメータで構造物を生成するEditorスクリプト（Structure Generator）を作成。 **(完了)**
- **タスク2.2: 基本形状の追加**: 円柱、壁、アーチの生成機能を追加。 **(完了)**
- **タスク2.3: ブール演算機能の実装**: オブジェクトの結合、減算（くり抜き）、交差を可能にする機能を追加する。 **(現在進行中)**
- **タスク2.4: Terrain生成の試作**: 巨大構造物の配置を念頭に置いた、シンプルなTerrain生成・配置方法を検討・試作する。

### フェーズ 3: コアメカニクス - 独自移動システム
- **タスク3.1: 特殊ダッシュ（夢の飛行）の実装**: 専用入力による急加速と浮遊感のあるダッシュ機能を追加。
- **タスク3.2: エネルギーシステム**: ダッシュ使用時に消費し、時間で回復するエネルギーバーとUIを実装。
- **タスク3.3: しゃがみハイジャンプ**: しゃがみの深度によって性能が変わるジャンプ機能を実装。

### フェーズ 4: コアメカニクス - Trailシステム
- **タスク4.1: 弾道予測と可視化**: Line Rendererなどを使い、射出角度や速度に応じた弾道を予測表示する。
- **タ.2: Trailの記録と遊覧飛行**: 決定した弾道をTrailとして空間に保存し、それに沿ってプレイヤーが移動する機能を実装する。

### フェーズ 5: 没入感の向上 - 表現力の強化
- **タスク5.1: 加速感の演出**: 速度に応じたFOV、VFX、SFXが連動するシステムを実装する。
- **タスク5.2: デカールシステムの試作**: オブジェクト表面にデカールを貼り付ける基本的なシステムを開発する。

### フェーズ 6: ゲームシステムの拡充と統合
- **タスク6.1: インタラクションシステム**: 触れるとテキストが表示される簡易的なインタラクションポイントを実装する。
- **タスク6.2: CSVテキストシステム**: CSVからデータを読み込み、ゲーム内に表示するシステムを構築する。
- **タスク6.3: 統合とデバッグ**: 全システムを一つのシーンに統合し、ゲームサイクルが通してプレイできることを確認し、課題を洗い出す。

## 5. 主要な課題
- **操作感の調整**: 独自の移動システムが、直感的で爽快感のあるものになるまで、繰り返しテストと調整が必要。
- **自動生成の制御**: 多様性と、ゲームとして面白い景観や構造を両立させるロジックの構築。
- **パフォーマンス**: 特にMobile環境において、多数のオブジェクトやエフェクトを処理するための最適化。
- **操作方法の共存**: 従来のゲーム操作と、本作独自の操作を両立させ、プレイヤーが選択できる設計。

## 6. 詳細な開発タスクリスト

### タスクグループ 1: プレイヤーコントローラー (完了)
- [x] 物理ベースの安定した移動（歩行、走行、惰性）の実装。
- [x] 信頼性の高いジャンプ機能（コヨーテタイム含む）の実装。
- [x] マウスによるスムーズなカメラ操作の実装。
- [x] Unity標準重力を利用した、安定した落下挙動の確保。

### タスクグループ 2: エディタ拡張とワールド構築 (進行中)
- [x] **`Structure Generator`ウィンドウの作成**
- [x] **基本形状の生成機能**:
    - [x] 円柱 (Cylinder)
    - [x] 壁 (Wall)
    - [ ] アーチ (Arch)
- [ ] **ブール演算機能の実装**:
    - [ ] 演算対象オブジェクトを選択するUIの実装。
    - [ ] 減算（Subtract / くり抜き）処理の実装。
    - [ ] 結合（Union）処理の実装。
    - [ ] 交差（Intersect）処理の実装。
- [ ] **プレハブ化機能**:
    - [ ] 生成したオブジェクトをプレハブとして保存するボタンの実装。
- [ ] **地形生成**:
    - [ ] 巨大構造物と共存可能な、シンプルなTerrainを生成・配置する機能。

### タスクグループ 3: コアメカニクス（独自移動）
- [ ] 特殊ダッシュ（夢の飛行）
- [ ] しゃがみハイジャンプ
- [ ] Trailシステム

### タスクグループ 4: 表現とインタラクション
- [ ] 加速表現（VFX, SFX）
- [ ] デカールシステム
- [ ] CSVによるテキスト管理
- [ ] 簡易インタラクションシステム 